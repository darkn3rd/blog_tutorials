> kubectl get all --namespace kube-system --selector component=nmi
NAME            READY   STATUS    RESTARTS   AGE
pod/nmi-9gfdl   1/1     Running   0          27m
pod/nmi-qdz6d   1/1     Running   0          27m
pod/nmi-xvd7c   1/1     Running   0          27m

NAME                 DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE
daemonset.apps/nmi   3         3         3       3            3           kubernetes.io/os=linux   27m

> kubectl get AzurePodIdentityException --namespace kube-system
NAME                  AGE
aks-addon-exception   27m

> kubectl get --namespace kube-addons AzureIdentity,AzureIdentityBinding
NAME                                               AGE
azureidentity.aadpodidentity.k8s.io/cert-manager   13m
azureidentity.aadpodidentity.k8s.io/external-dns   14m

NAME                                                              AGE
azureidentitybinding.aadpodidentity.k8s.io/cert-manager-binding   13m
azureidentitybinding.aadpodidentity.k8s.io/external-dns-binding   14m

> helmfile apply
> kubectl get all --namespace kube-addons

NAME                                            READY   STATUS    RESTARTS   AGE
pod/cert-manager-5794fc5c49-x897t               1/1     Running   0          39s
pod/cert-manager-cainjector-856d4df858-w8xhk    1/1     Running   0          39s
pod/cert-manager-webhook-668df6dd95-xs2hx       1/1     Running   0          39s
pod/external-dns-769cf7885c-svr2x               1/1     Running   0          48s
pod/ingress-nginx-controller-65c4f84996-6vk97   1/1     Running   0          42s
pod/ingress-nginx-controller-65c4f84996-prgr4   1/1     Running   0          42s

NAME                                         TYPE           CLUSTER-IP     EXTERNAL-IP    PORT(S)                      AGE
service/cert-manager                         ClusterIP      10.0.102.242   <none>         9402/TCP                     40s
service/cert-manager-webhook                 ClusterIP      10.0.219.215   <none>         443/TCP                      40s
service/external-dns                         ClusterIP      10.0.107.98    <none>         7979/TCP                     50s
service/ingress-nginx-controller             LoadBalancer   10.0.125.99    20.72.219.88   80:30937/TCP,443:32660/TCP   43s
service/ingress-nginx-controller-admission   ClusterIP      10.0.8.2       <none>         443/TCP                      43s

NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/cert-manager               1/1     1            1           40s
deployment.apps/cert-manager-cainjector    1/1     1            1           40s
deployment.apps/cert-manager-webhook       1/1     1            1           40s
deployment.apps/external-dns               1/1     1            1           50s
deployment.apps/ingress-nginx-controller   2/2     2            2           43s

NAME                                                  DESIRED   CURRENT   READY   AGE
replicaset.apps/cert-manager-5794fc5c49               1         1         1       41s
replicaset.apps/cert-manager-cainjector-856d4df858    1         1         1       41s
replicaset.apps/cert-manager-webhook-668df6dd95       1         1         1       41s
replicaset.apps/external-dns-769cf7885c               1         1         1       51s
replicaset.apps/ingress-nginx-controller-65c4f84996   2         2         2       44s

> EXTERNAL_DNS_POD=$(kubectl get pod \
  --namespace kube-addons \
  --selector "app.kubernetes.io/name=external-dns" \
  --output name
)

> kubectl logs $EXTERNAL_DNS_POD --namespace kube-addons

> export ACME_ISSUER_EMAIL=user@example.com
> helmfile --file issuers.yaml apply
> kubectl get ClusterIssuer --namespace kube-addons
NAME                  READY   AGE
letsencrypt-prod      True    68s
letsencrypt-staging   True    68s
